<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.3">
<meta name="author" content="Adrien Pessu">
<title>kotlin : le back du futur</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
body{-webkit-font-smoothing:antialiased}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
body{tab-size:4}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>kotlin : le back du futur</h1>
<div class="details">
<span id="author" class="author">Adrien Pessu</span><br>
<span id="revdate">Gautier de Saint Martin Lacaze</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#pré-requis">Pré-requis</a>
<ul class="sectlevel2">
<li><a href="#installation-de-java-8">Installation de Java 8</a>
<ul class="sectlevel3">
<li><a href="#linux-x64">Linux x64</a>
<ul class="sectlevel4">
<li><a href="#rpm">RPM</a></li>
<li><a href="#autre">Autre</a></li>
</ul>
</li>
<li><a href="#mac">Mac</a></li>
<li><a href="#windows">Windows</a></li>
</ul>
</li>
<li><a href="#installation-d-un-ide">Installation d&#8217;un IDE</a>
<ul class="sectlevel3">
<li><a href="#linux">Linux</a></li>
<li><a href="#mac-2">Mac</a></li>
<li><a href="#windows-2">Windows</a></li>
</ul>
</li>
<li><a href="#récupération-du-projet">Récupération du projet</a></li>
<li><a href="#builder-l-application">Builder l&#8217;application</a></li>
<li><a href="#importer-le-projet-dans-intellij-idea-community">Importer le projet dans Intellij IDEA community</a></li>
</ul>
</li>
<li><a href="#les-bases">Les bases</a>
<ul class="sectlevel2">
<li><a href="#contexte">Contexte</a></li>
<li><a href="#un-peu-de-théorie">Un peu de théorie</a>
<ul class="sectlevel3">
<li><a href="#code-val-code-vs-code-var-code"><code>val</code> vs <code>var</code></a></li>
<li><a href="#qu-est-ce-qu-une-code-class-code">Qu&#8217;est ce qu&#8217;une <code>Class</code> ?</a></li>
<li><a href="#qu-est-ce-qu-une-code-data-class-code">Qu&#8217;est ce qu&#8217;une <code>Data Class</code> ?</a></li>
</ul>
</li>
<li><a href="#exercice-0">Exercice 0</a></li>
<li><a href="#un-peu-de-théorie-2">Un peu de théorie</a></li>
<li><a href="#les-fonctions">Les fonctions</a></li>
<li><a href="#exercice-1">Exercice 1</a></li>
</ul>
</li>
<li><a href="#un-peu-de-code-fun-code">Un peu de <code>fun</code></a>
<ul class="sectlevel2">
<li><a href="#un-peu-de-théorie-3">Un peu de théorie</a>
<ul class="sectlevel3">
<li><a href="#static-method">Static method</a></li>
<li><a href="#code-object-code"><code>Object</code></a></li>
</ul>
</li>
<li><a href="#un-peu-de-théorie-4">Un peu de théorie</a>
<ul class="sectlevel3">
<li><a href="#paramètre-nommé">Paramètre nommé</a></li>
<li><a href="#paramètre-par-défaut">Paramètre par défaut</a></li>
<li><a href="#copy">Copy</a></li>
<li><a href="#string-templates">String templates</a></li>
</ul>
</li>
<li><a href="#exercice-2">Exercice 2</a></li>
</ul>
</li>
<li><a href="#ktor">kTor</a>
<ul class="sectlevel2">
<li><a href="#un-peu-de-théorie-5">Un peu de théorie</a>
<ul class="sectlevel3">
<li><a href="#ktor-2">kTor</a>
<ul class="sectlevel4">
<li><a href="#voici-comment-créer-une-application-rest-avec-ktor">Voici comment créer une application REST avec kTor</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#exercice-3">Exercice 3</a></li>
</ul>
</li>
<li><a href="#flow-control">Flow control</a>
<ul class="sectlevel2">
<li><a href="#une-peu-de-théorie">Une peu de théorie</a>
<ul class="sectlevel3">
<li><a href="#range">range</a></li>
<li><a href="#when">When</a></li>
</ul>
</li>
<li><a href="#exercice-4">Exercice 4</a></li>
</ul>
</li>
<li><a href="#gestion-de-la-nullité-et-initialisation-tardive">Gestion de la nullité et initialisation tardive</a>
<ul class="sectlevel2">
<li><a href="#un-peu-de-théorie-6">Un peu de théorie</a>
<ul class="sectlevel3">
<li><a href="#la-mort-de-l-opérateur-ternaire">La mort de l&#8217;opérateur ternaire</a></li>
<li><a href="#gestion-du-null">Gestion du null</a></li>
<li><a href="#les-extensions">Les extensions</a></li>
</ul>
</li>
<li><a href="#exercice-5">Exercice 5</a></li>
</ul>
</li>
<li><a href="#pour-aller-plus-loin">Pour aller plus loin</a>
<ul class="sectlevel2">
<li><a href="#exercice-6">Exercice 6</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="pré-requis">Pré-requis</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Adrien Pessu
Gautier de Saint Martin Lacaze</p>
</div>
<div class="sect2">
<h3 id="installation-de-java-8">Installation de Java 8</h3>
<div class="sect3">
<h4 id="linux-x64">Linux x64</h4>
<div class="sect4">
<h5 id="rpm">RPM</h5>
<div class="paragraph">
<p>Accéder au site de téléchargement Oracle pour le <a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html">jdk 8</a>.</p>
</div>
<div class="paragraph">
<p>Récupérer le RPM suivant jdk-8u161-linux-x64.rpm</p>
</div>
<div class="paragraph">
<p>Suivez les instructions de votre gestionnaire de paquet.</p>
</div>
<div class="paragraph">
<p>Changez la version de java à utiliser par votre système avec la commande suivante</p>
</div>
<div class="listingblock">
<div class="content">
<pre>alternatives --config java</pre>
</div>
</div>
<div class="paragraph">
<p>Sélectionner la version JDK 8 installé précédement</p>
</div>
<div class="paragraph">
<p>Éventuellement changer également la version de de <code>javac</code> avec la commande suivante</p>
</div>
<div class="listingblock">
<div class="content">
<pre>alternatives --config javac</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Il se peut que vous soyez obligé pour la commande alternative d&#8217;utiliser <code>sudo</code>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="autre">Autre</h5>
<div class="paragraph">
<p>Accéder au site de téléchargement Oracle pour le <a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html">jdk 8</a>.</p>
</div>
<div class="paragraph">
<p>Récupérer l&#8217;archive suivante jdk-8u161-linux-x64.tar.gz</p>
</div>
<div class="paragraph">
<p>Désarchiver votre archive où vous le souhaitez.
Par exemple dans <code>/usr/java/jdk1.8.0_161/</code></p>
</div>
<div class="paragraph">
<p>Changez la version de java à utiliser avec la commande suivante</p>
</div>
<div class="listingblock">
<div class="content">
<pre>alternatives --config java</pre>
</div>
</div>
<div class="paragraph">
<p>Sélectionner la version JDK 8 installé précédement</p>
</div>
<div class="paragraph">
<p>Éventuellement changer également la version de de <code>javac</code> avec la commande suivante</p>
</div>
<div class="listingblock">
<div class="content">
<pre>alternatives --config javac</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Il se peut que vous soyez obligé pour la commande alternative d&#8217;utiliser <code>sudo</code>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="mac">Mac</h4>
<div class="paragraph">
<p>Accéder au site de téléchargement Oracle pour le <a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html">jdk 8</a>.</p>
</div>
<div class="paragraph">
<p>Récupérer le fichier suivant jdk-8u161-macosx-x64.dmg</p>
</div>
<div class="paragraph">
<p>Utiliser le fichier dmg et suivre les instructions d&#8217;installation.</p>
</div>
</div>
<div class="sect3">
<h4 id="windows">Windows</h4>
<div class="paragraph">
<p>Accéder au site de téléchargement Oracle pour le <a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html">jdk 8</a>.</p>
</div>
<div class="paragraph">
<p>Récupérer l&#8217;exécutable suivant jdk-8u161-windows-x64.exe</p>
</div>
<div class="paragraph">
<p>Lancer l&#8217;exécutable et suivre les instructions</p>
</div>
<div class="paragraph">
<p>Vous pouvez par la suite changer votre path pour rajouter une JAVA_HOME.
Plus d&#8217;information sur <a href="https://confluence.atlassian.com/doc/setting-the-java_home-variable-in-windows-8895.html">ce site</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="installation-d-un-ide">Installation d&#8217;un IDE</h3>
<div class="sect3">
<h4 id="linux">Linux</h4>
<div class="paragraph">
<p>Par simplicité, nous allons installer Jetbrains Intellij IDEA Community.</p>
</div>
<div class="paragraph">
<p>Accéder <a href="https://www.jetbrains.com/idea/download/#section=linux">au site</a> de téléchargement</p>
</div>
<div class="paragraph">
<p>Récupérer l&#8217;archive de l&#8217;édition community.</p>
</div>
<div class="paragraph">
<p>Désarchiver l&#8217;archive dans un répertoire de votre choix.</p>
</div>
<div class="paragraph">
<p>Pour lancer l&#8217;IDE, il vous suffira d&#8217;accéder au répertoire où vous avez installé l&#8217;IDE et de lancer le fichier `idea.sh`présent dans le sous-répertoire bin.</p>
</div>
</div>
<div class="sect3">
<h4 id="mac-2">Mac</h4>
<div class="paragraph">
<p>Par simplicité, nous allons installer Jetbrains Intellij IDEA Community.</p>
</div>
<div class="paragraph">
<p>Accéder <a href="https://www.jetbrains.com/idea/download/#section=mac">au site</a> de téléchargement</p>
</div>
<div class="paragraph">
<p>Récupérer l&#8217;archive dmg de l&#8217;édition community.</p>
</div>
<div class="paragraph">
<p>Utiliser le fichier dmg et suivre les instructions d&#8217;installation.</p>
</div>
</div>
<div class="sect3">
<h4 id="windows-2">Windows</h4>
<div class="paragraph">
<p>Par simplicité, nous allons installer Jetbrains Intellij IDEA Community.</p>
</div>
<div class="paragraph">
<p>Accéder <a href="https://www.jetbrains.com/idea/download/#section=windows">au site</a> de téléchargement</p>
</div>
<div class="paragraph">
<p>Récupérer l&#8217;exécutable de l&#8217;édition community.</p>
</div>
<div class="paragraph">
<p>Exécuter l&#8217;installeur et suivre les instructions.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="récupération-du-projet">Récupération du projet</h3>
<div class="paragraph">
<p>En ligne de commande :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>git clone git@github.com:bttf-kotlin/kotlin-codelab-ktor.git</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="builder-l-application">Builder l&#8217;application</h3>
<div class="paragraph">
<p>Accéder au répertoire du projet et lancer la commande suivante :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>./gradlew build</pre>
</div>
</div>
<div class="paragraph">
<p>Voilà c&#8217;est bon vous êtes prêt pour effectuer le codelab avec nous.</p>
</div>
</div>
<div class="sect2">
<h3 id="importer-le-projet-dans-intellij-idea-community">Importer le projet dans Intellij IDEA community</h3>
<div class="paragraph">
<p>Lancer Intellij IDEA Community Edition et importez un projet existant.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/import-project-2.png" alt="import project 2">
</div>
</div>
<div class="paragraph">
<p>Sélectionnez l&#8217;import pour <code>Gradle</code> puis faire <code>next</code></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/import-project-3.png" alt="import project 3">
</div>
</div>
<div class="paragraph">
<p>Cochez la case <code>auto-import</code> et cliquez sur <code>finish</code></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/import-project-4.png" alt="import project 4">
</div>
</div>
<div class="paragraph">
<p>L&#8217;import devrait se passer sans problème.</p>
</div>
<div class="paragraph">
<p>Une fois celui-ci terminé, lancez le <code>main</code> présent dans <code>Main.kt</code></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/import-project-5.png" alt="import project 5">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="les-bases">Les bases</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Adrien Pessu
Gautier de Saint Martin Lacaze</p>
</div>
<div class="sect2">
<h3 id="contexte">Contexte</h3>
<div class="paragraph">
<p>Afin de bien démarrer ce codelab, nous vous avons déjà créé un projet Kotlin avec Gradle.</p>
</div>
</div>
<div class="sect2">
<h3 id="un-peu-de-théorie">Un peu de théorie</h3>
<div class="sect3">
<h4 id="code-val-code-vs-code-var-code"><code>val</code> vs <code>var</code></h4>
<div class="paragraph">
<p>En Kotlin, il existe deux mot clés pour déclarer des variables. Le premier s&#8217;appelle <code>val</code> et le second `var</p>
</div>
<div class="paragraph">
<p><code>val</code> est immutable alors que <code>var</code> est mutable.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">val name = &quot;kotlin&quot;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans ce premier cas, on doit obligatoirement initialiser <code>name</code> et on ne pourra pas changer sa valeur.
Si l&#8217;on a besoin de le faire, il faudra utiliser le mot clé <code>var</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">var name: String
name = &quot;kotlin&quot;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans ce second cas, grâce au mot clé <code>var</code>, on peut initialiser <code>name</code> dans la suite du programme.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
On peut remarquer que dans le cas de <code>val</code> le compilateur est capable d&#8217;inférer le type de <code>name</code>.
Il n&#8217;est pas nécessaire de le préciser.
Dans le cas de <code>var</code> c&#8217;est différent. L&#8217;initialisation tardive de <code>name</code> empêche le compilateur d&#8217;inférer le type.
Il est donc nécessaire de le préciser.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Comme vous pouvez le remarquer il n&#8217;y a pas besoin de <code>;</code> à la fin des instructions.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="qu-est-ce-qu-une-code-class-code">Qu&#8217;est ce qu&#8217;une <code>Class</code> ?</h4>
<div class="paragraph">
<p>Une classe Kotlin ressemble à une classe Java à quelques différences prêt.
On la déclare avec le mot clé <code>class</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre>class User {
}</pre>
</div>
</div>
<div class="paragraph">
<p>On peut lui déclarer un ou plusieurs contructeurs.
Le premier constructeur sera appelé constructeur primaire.
Il est déclaré dans l&#8217;entête de la classe.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">class User constructor(firstName: String) {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans le cas où le constructeur n&#8217;aurait pas d&#8217;annotation, il est possible de réduire la syntaxe du constructeur.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">class User (firstName: String) {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Vous trouverez plus d&#8217;informations si besoin sur <a href="https://kotlinlang.org/docs/reference/classes.html#classes">le site officiel de Kotlin</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="qu-est-ce-qu-une-code-data-class-code">Qu&#8217;est ce qu&#8217;une <code>Data Class</code> ?</h4>
<div class="paragraph">
<p>Contrairement à une <code>Class</code>, une <code>Data Class</code> représente un POJO contenant de la donnée.
Il a donc pour but de stocker des données dans des attributs et éventuellement de fournir des méthodes pour manipuler le contenu de notre objet.</p>
</div>
<div class="paragraph">
<p>Pour déclarer une <code>Data Class</code>, il suffit d&#8217;utiliser le mot clé <code>data</code> conjointement au mot clé <code>class</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">data class User(val name: String, val age: Int)</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Comme pour les <code>class</code>, il n&#8217;est pas nécessaire de mettre les accolades lorsqu&#8217;il n&#8217;y a pas de méthodes dans la classe.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Là où la <code>Data Class</code> est très intéressante, c&#8217;est que le compilateur va nous aider pour l&#8217;avenir en fournissant automatiquement les éléments suivants à notre objet.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Les méthodes <code>equals()</code> et <code>hashCode()</code></p>
</li>
<li>
<p>La méthode <code>toString()</code> renvoyant une chaîne de charactères de la forme suivante <code>User(name=John, age=42)</code></p>
</li>
<li>
<p>Une méthode de <code>copy</code> (évoqué plus tard dans ce codelab)</p>
</li>
<li>
<p>Les méthodes dites <code>componentN()</code> qui sont utile lors de l&#8217;utilisation du <a href="https://kotlinlang.org/docs/reference/multi-declarations.html">destructuring</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Vous trouverez plus d&#8217;informations si besoin sur <a href="https://kotlinlang.org/docs/reference/data-classes.html">le site officiel de Kotlin</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="exercice-0">Exercice 0</h3>
<div class="paragraph">
<p>Passons maintenant à la pratique.
Pour ce premier exercice, nous allons le faire ensemble.</p>
</div>
<div class="paragraph">
<p>Si ce n&#8217;est pas déjà fait, faites un checkout du step0.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>git checkout step0</code></pre>
</div>
</div>
<div class="paragraph">
<p>Est ce que votre projet compile? Pourquoi?</p>
</div>
</div>
<div class="sect2">
<h3 id="un-peu-de-théorie-2">Un peu de théorie</h3>

</div>
<div class="sect2">
<h3 id="les-fonctions">Les fonctions</h3>
<div class="paragraph">
<p>Maintenant que nous avons joué rapidement avec notre <code>Data Class</code> <code>Event</code>, nous allons présenter les fonctions en Kotlin.</p>
</div>
<div class="paragraph">
<p>Une fonction Kotlin se déclare de la manière suivant :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">fun sum(a: Int, b: Int): Int {    <i class="conum" data-value="1"></i><b>(1)</b> <i class="conum" data-value="2"></i><b>(2)</b> <i class="conum" data-value="3"></i><b>(3)</b> <i class="conum" data-value="4"></i><b>(4)</b>
    return a + b
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><strong>fun</strong> est le mot clé permettant de définir une fonction.
Contrairement à Java, une fonction Kotlin a la portée publique par défaut.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><strong>sum</strong> est le nom de la fonction.
Nous reviendrons sur les noms juste après.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>On peut déclarer ensuite les paramètres d&#8217;entrée.
Ici <code>a</code> et <code>b</code> tous les deux de type Int.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Enfin on indique le type de retour <code>Int</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Comme vous pouvez le remarquer cette fonction est très simple.
Il est donc possible en Kotlin de raccourcir la syntaxe d&#8217;une telle fonction à une seule ligne.
Le code aura alors la forme suivante.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">fun sum(a: Int, b: Int) = a + b</code></pre>
</div>
</div>
<div class="paragraph">
<p>Vous trouverez plus d&#8217;informations sur les fonctions sur <a href="https://kotlinlang.org/docs/reference/functions.html#function-declarations">le site officiel de Kotlin</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Il est possible de déclarer une méthode avec des espaces dans le nom.
Pour cela nous utiliserons le charactère `.</p>
</div>
<div class="paragraph">
<p>C&#8217;est une pratique à réserver aux tests mais qui s&#8217;avère bien pratique pour écrire des tests explicites.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">class MyTestCase {
     @Test fun `ensure everything works`() {
     }

     @Test fun ensureEverythingWorks_onAndroid() {
     }
}s</code></pre>
</div>
</div>
<div class="paragraph">
<p>Vous trouverez plus d&#8217;informations sur les conventions de nommage des fonctions sur <a href="https://kotlinlang.org/docs/reference/coding-conventions.html#function-names">cette page</a></p>
</div>
</div>
<div class="sect2">
<h3 id="exercice-1">Exercice 1</h3>
<div class="paragraph">
<p>Si ce n&#8217;est pas déjà fait, faites un checkout du step1.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>git checkout step1</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans cet exercice, nous allons filter automatiquement les événements qui n&#8217;ont pas de date dans notre source de données.</p>
</div>
<div class="paragraph">
<p>Pour cela, accéder à la classe <code>EventUtil</code> et ajouter un filtre sur le retour de la méthode <code>prettier</code>.</p>
</div>
<div class="paragraph">
<p>Pensez à vous aider des tests unitaires présents dans <code>EventUtilTest.kt</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Pour information, l&#8217;API collection de Kotlin fourni de nombreuses méthodes utilitaires sur les classes.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="un-peu-de-code-fun-code">Un peu de <code>fun</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Adrien Pessu
Gautier de Saint Martin Lacaze</p>
</div>
<div class="sect2">
<h3 id="un-peu-de-théorie-3">Un peu de théorie</h3>
<div class="sect3">
<h4 id="static-method">Static method</h4>
<div class="paragraph">
<p>Contrairement à Java, Kotlin ne supporte pas les méthodes statiques pour une classe.
En fait, les méthodes statiques n&#8217;appartiennent pas à l&#8217;instance de l&#8217;objet mais plutôt au type lui-même.
De ce fait, il est conseillé en Kotlin de définir les méthodes, que l&#8217;on veut statique, directement au niveau du package.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">fun toUpperCase(input:String):String{
    return if(input.isEmpty()) &quot;&quot; else input.toUpperCase()
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>La méthode précédente pourra être appelé directement (sans instance d&#8217;un objet) de la façon suivante :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">fun main(args: Array&lt;String&gt;) {
    val message = &quot;Kotlin : le back du futur&quot;
    println(&quot;Initial case: $message&quot;)
    println(&quot;Upper case: &quot; + toUpperCase(message))
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Puisque l&#8217;on vient de voir les méthodes statiques, on peut se demander comment déclarer un singleton.
Pour rappel, le singleton est un pattern de programmation limitant l&#8217;instanciation d&#8217;une classe à une unique instance.
Une fois l&#8217;instance créée, elle "vivra" tout au long de la durée de vie de votre programme.</p>
</div>
<div class="paragraph">
<p>Voici un singleton en Kotlin :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">object MonSingleton {
    private var count = 0
    fun callMe():Unit {
        println(&quot;Ça fait $count fois que je suis appelé !&quot;)
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Avec l&#8217;exemple précédent, on peut appeler directement notre méthode via <code>MonSingleton.callMe()</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="code-object-code"><code>Object</code></h4>
<div class="paragraph">
<p>TODO</p>
</div>
<div class="paragraph">
<p>Il existe aussi la notion de Companion</p>
</div>
<div class="paragraph">
<p>Vous trouverez plus d&#8217;informations sur les <code>companion</code> sur <a href="https://kotlinlang.org/docs/reference/object-declarations.html#companion-objects">cette page</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="un-peu-de-théorie-4">Un peu de théorie</h3>
<div class="sect3">
<h4 id="paramètre-nommé">Paramètre nommé</h4>
<div class="paragraph">
<p>Contrairement à Java, Kotlin fourni le support des paramètres nommés.
Ceux-ci nous permettent notamment d&#8217;être explicites sur le nommage des arguments lorsqu&#8217;ils sont passés à une fonction.
Cela à l&#8217;avantage d&#8217;expliciter les appels notament lorsqu&#8217;il y a de nombreux arguments.</p>
</div>
<div class="paragraph">
<p>Dans l&#8217;exemple suivant, il n&#8217;est pas aisé de savoir à quoi correspond chaque valeur passé en paramètre.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">val string = &quot;Kotlin is a great language&quot;
string.endsWith(&quot;Great Language&quot;, true)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Avec les paramètres nommés cela devient beaucoup plus lisible.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">val string = &quot;Kotlin is a great language&quot;
string.endsWith(suffix = &quot;Great Language&quot;, ignoreCase = true)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Un autre bénéfice des paramètres nommés est la possibilité pour le code appelant la fonction de réorganiser l&#8217;ordre des paramètres.
Le code suivant est toujours valide.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">val string = &quot;Kotlin is a great language&quot;
string.endsWith(ignoreCase = true, suffix = &quot;Great Language&quot;)</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Les paramètres nommés ne peuvent être utilisés que sur des fonctions définies par Kotlin et non sur des fonctions définies par Java.
Cela est dû au fait que le code Java, lorsqu&#8217;il est compilé en bytecode, ne conserve pas toujours les noms des paramètres.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Vous trouverez plus d&#8217;informations sur les <code>paramètre nommé</code> sur <a href="https://kotlinlang.org/docs/reference/functions.html#named-arguments">cette page</a></p>
</div>
</div>
<div class="sect3">
<h4 id="paramètre-par-défaut">Paramètre par défaut</h4>
<div class="paragraph">
<p>Il est souvent utile de définir des paramètres par défaut pour nos méthodes.
En Java, cela se traduit par l&#8217;overloading.
On a alors un code au format suivant</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">void</span> myFunction(<span class="predefined-type">String</span> string, <span class="type">boolean</span> ignoreCase) {
    <span class="comment">// do stuff</span>
}

<span class="directive">public</span> <span class="type">void</span> myFunction(<span class="predefined-type">String</span> string) {
    myFunction(string, <span class="predefined-constant">false</span>);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Kotlin fournit une alternative très intéressante.
Il est possible dans la définition d&#8217;une fonction de préciser des valeurs par défaut.
L&#8217;équivalent du code Java précédent serait le suivant en Kotlin.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">fun myFunction(string: String, ignoreCase: Boolean = false): Unit {
    // do stuff
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>On peut alors appeler notre code de la façon suivante.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">myFunction(&quot;call without default parameter&quot;, true)
myFunction(&quot;call with default parameter&quot;)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Vous trouverez plus d&#8217;informations sur les <code>paramètres par défaut</code> sur <a href="https://kotlinlang.org/docs/reference/functions.html#default-arguments">cette page</a></p>
</div>
</div>
<div class="sect3">
<h4 id="copy">Copy</h4>
<div class="paragraph">
<p>Comme promis au début de ce codelab, nous allons aborder rapidement la méthode copy des <code>Data class</code>.
Pour rappel, lorsque l&#8217;on déclare une <code>Data class</code>, on obtient une méthode de copie prête à l&#8217;emploi.
Cette méthode vous permet de créer une nouvelle instance de votre type tout en sélectionnant les champs que vous souhaitez modifier.
Par exemple, vous pouvez décider que vous souhaitez obtenir une nouvelle instance d&#8217;une classe <code>Event</code> à partir d&#8217;une instance existante dont vous souhaitez simplement modifier les champs de date et de lieu.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">event.copy(location = &quot;Tours&quot;, date = &quot;2018-02-23&quot;)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="string-templates">String templates</h4>
<div class="paragraph">
<p>En tant que développeurs Java, nous sommes familiers avec l&#8217;utilisation de la concaténation de chaînes de caractères.
Si l&#8217;on garde la pattern appris en Java cela donnerait le code suivant en Kotlin.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">val name = &quot;TouraineTech&quot;
print(&quot;Hello &quot; + name)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Les <code>String templates</code> sont un moyen simple et efficace d&#8217;incorporer des valeurs, des variables ou même des expressions dans une chaîne sans avoir besoin d&#8217;utiliser la concaténation précédente.</p>
</div>
<div class="paragraph">
<p>Les <code>String templates</code> améliorent l&#8217;expérience du développeur lors de l&#8217;utilisation de plusieurs variables dans un seul littéral.
En effet, ils conservent la chaîne plus courte et plus lisible.
L&#8217;utilisation est extrêmement simple. Une valeur ou une variable peut être intégrée simplement par préfixer avec un symbole dollar ($):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">val name = &quot;TouraineTech&quot;
print(&quot;hello $name&quot;)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Là où ça devient intéressant pour le templating, c&#8217;est qu&#8217;il existe plusieurs format de <code>String</code>.
Pour le moment nous avons vu le <code>String correspondant</code> à celui en Java avec la forme suivante <code>val name = "TouraineTech"</code>.
Il existe également le <code>raw String</code>.
Il se déclare de la façon suivante.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">val text = &quot;&quot;&quot;
    |Tell me and I forget.
    |Teach me and I remember.
    |Involve me and I learn.
    |(Benjamin Franklin)
    &quot;&quot;&quot;.trimMargin()</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Par défaut le "|" est utilisé comme préfixe indiquant la position de la marge gauche du <code>raw string</code>.
On peut néanmois choisir un autre caractère et le passer en paramètre de la méthode <code>trimMargin</code>.
Par exemple, <code>trimMargin("&gt;")</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Vous trouverez plus d&#8217;informations sur les <code>String template</code> sur <a href="https://kotlinlang.org/docs/reference/basic-types.html#string-literals">cette page</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="exercice-2">Exercice 2</h3>
<div class="paragraph">
<p>Après autant de théorie, repassons à la pratique.</p>
</div>
<div class="paragraph">
<p>Afin de commancer l&#8217;exercice suivant, faites un checkout du step2.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>git checkout step2</code></pre>
</div>
</div>
<div class="paragraph">
<p>Modifier la méthode <code>prettier</code> pour remplacer chaque chiffre par son équivalent en chaîne de charactères en utilisant le tableau <code>unitsString</code> déjà disponible.</p>
</div>
<div class="paragraph">
<p>Il n&#8217;y a pas qu&#8217;une seule solution.</p>
</div>
<div class="paragraph">
<p>Pensez à vous aider des tests unitaires présents dans <code>EventUtilText.kt</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ktor">kTor</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Adrien Pessu
Gautier de Saint Martin Lacaze</p>
</div>
<div class="sect2">
<h3 id="un-peu-de-théorie-5">Un peu de théorie</h3>
<div class="sect3">
<h4 id="ktor-2">kTor</h4>
<div class="paragraph">
<p>Ktor est un framework d&#8217;application Web écrit lui-même en Kotlin, dont le but est de fournir un outil de création d&#8217;application web (servlet 3.0) ou API REST en Kotlin.
Le livrable produit peut être hébergé sur un containeur de servlet comme Tomcat ou en standalone avec, par exemple, Netty.
kTor est construit autour des coroutines de Kotlin et est donc asynchrone par nature.
kTor n&#8217;oblige pas à utiliser une framework ou un outil, vous pouvez donc utiliser ce que vous voulez pour la journalisaton, l&#8217;injection de dépendance, le templating,&#8230;&#8203;
kTor se veut léger, mais extensible par un mécanisme de plugin utilisant le DSL de Kotlin.</p>
</div>
<div class="sect4">
<h5 id="voici-comment-créer-une-application-rest-avec-ktor">Voici comment créer une application REST avec kTor</h5>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>import io.ktor.server.netty.*
import io.ktor.routing.*
import io.ktor.application.*
import io.ktor.http.*
import io.ktor.response.*
import io.ktor.server.engine.*

fun main(args: Array&lt;String&gt;) {
    embeddedServer(Netty, 8080) {
        routing {
            get("/") {
                call.respondText("Hello, world!", ContentType.Text.Html)
            }
        }
    }.start(wait = true)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Pour utiliser kTor sur un projet Kotlin, il suffit d&#8217;ajouter la dependance :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>compile "io.ktor:ktor-server-core:0.9.3"</code></pre>
</div>
</div>
<div class="paragraph">
<p>pour gradle</p>
</div>
<div class="paragraph">
<p>Le site <a href="http://ktor.io">ktor.io</a> permet de créer des templates d&#8217;application selon votre besoin (comme le fait <a href="http://start.spring.io" class="bare">http://start.spring.io</a>)</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="exercice-3">Exercice 3</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>git checkout step3</code></pre>
</div>
</div>
<div class="paragraph">
<p>Nous avons ajouté kTor (Voir <code>build.gradle</code> et <code>Main.kt</code>)</p>
</div>
<div class="paragraph">
<p>Ajouter un point d&#8217;entré REST pour afficher notre liste. Le point d&#8217;entrée REST devra être disponible sur <code>/events</code></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="flow-control">Flow control</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Adrien Pessu
Gautier de Saint Martin Lacaze</p>
</div>
<div class="sect2">
<h3 id="une-peu-de-théorie">Une peu de théorie</h3>
<div class="paragraph">
<p>Pour le moment nous avons vu les rapidement les éléments suivants de Kotlin :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>val</code> et <code>var</code></p>
</li>
<li>
<p><code>class</code> et <code>data class</code></p>
</li>
<li>
<p>méthode statique</p>
</li>
<li>
<p><code>companion</code></p>
</li>
<li>
<p>paramètre nommé</p>
</li>
<li>
<p>paramètre par défaut</p>
</li>
<li>
<p>copy</p>
</li>
<li>
<p>string templates</p>
</li>
<li>
<p>if / else</p>
</li>
<li>
<p>gestion de la nullité avec l&#8217;opérateur Elvis</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Nous allons passer maintenant à deux autres éléments nécessaire pour écrire la majorité des algorithmes d&#8217;un programme.</p>
</div>
<div class="sect3">
<h4 id="range">range</h4>
<div class="paragraph">
<p>Les <code>range</code> sont des expressions permettant de créer rapidement une plage de valeur très rapidement.
Pour les utiliser, on peut utiliser la méthode <code>rangeTo</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">1.rangeTo(10)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il existe une écrire plus courte via l&#8217;opérateur <code>..</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">1..10</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Il est possible d&#8217;utiliser également les <code>range</code> sur des lettres.
Par exemple <code>val aToZ = "a".."z"</code>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>On peut tester la présence d&#8217;un élément dans une plage de valeur de la manière suivante.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">if (i in 1..10) { // équivalent à 1 &lt;= i &amp;&amp; i &lt;= 10. Avouez que c'est plus agréable à lire non ?
    println(i)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Vous trouverez plus d&#8217;informations sur les <code>range</code> sur <a href="https://kotlinlang.org/docs/reference/ranges.html#ranges">cette page</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="when">When</h4>
<div class="paragraph">
<p>L&#8217;expression <code>when</code> est un équivalent du <code>switch</code> présent dans de nombreux langages de programmation.
C&#8217;est également une expression fonctionnelle permettant de faire du <a href="https://en.wikipedia.org/wiki/Pattern_matching">pattern matching</a>.</p>
</div>
<div class="paragraph">
<p>Il existe deux façon d&#8217;utiliser le <code>when</code>.
Soit il prend un argument.
Soit on ne met pas d&#8217;argument.
Dans ce second cas, le when permet de remplacer facilement une série de if / else.</p>
</div>
<div class="paragraph">
<p>L&#8217;une des écritures les plus simple du <code>when</code> est la suivante :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">fun whatNumber(x: Int) {
    when (x) {
        0 -&gt; println(&quot;x is zero&quot;)
        1 -&gt; println(&quot;x is 1&quot;)
        else -&gt; {
            println(&quot;X is neither 0 or 1&quot;)
        }
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Dans ce premier cas, on prend un paramètre en entrée.
Le when permet alors de vérifier si l&#8217;on "matche" une des possibilités du <code>when</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>L&#8217;autre façon d&#8217;écrire le when est de ne pas passer d&#8217;arguments.
Dans ce second cas, la syntaxe est la suivante.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">fun whichOneIsBigger(x: Int, y: Int) {
    when {
        x &lt; y -&gt; println(&quot;x is less than y&quot;)
        x &gt; y -&gt; println(&quot;X is greater than y&quot;)
        else -&gt; println(&quot;X must equal y&quot;)
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>A plusieurs moment, on a indiqué que <code>when</code> était une expression.
Celle-ci est donc assignable à une variable.
La syntaxe suivante est valide.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">fun startsWith(any: Any, prefix: String): Boolean {
    val result = when (any) {
        is String -&gt; any.startsWith(prefix)
        else -&gt; false
    }
    return result
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>On peut même simplifier le code précédent.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">fun startsWith(any: Any, prefix: String): Boolean {
    return when (any) {
        is String -&gt; any.startsWith(prefix)
        else -&gt; false
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Vous trouverez plus d&#8217;informations sur l&#8217;expression <code>when</code> sur <a href="https://kotlinlang.org/docs/reference/control-flow.html#when-expression">cette page</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="exercice-4">Exercice 4</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>git checkout step4</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans l&#8217;exercice 4, nous avons remplacé chaque chiffre de la date par son équivalent en chaîne de charactères.
Comme vous pouvez le remarquer ce n&#8217;est pas comme cela que l&#8217;on doit lire une date.</p>
</div>
<div class="paragraph">
<p>Nous allons donc modifier notre <code>fun prettier</code> pour gérer les cas des milliers, des centaines et des dizaines.</p>
</div>
<div class="paragraph">
<p>Pour vous aider, il y a des tests unitaires dans la classe <code>EventUtilTest.kt</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gestion-de-la-nullité-et-initialisation-tardive">Gestion de la nullité et initialisation tardive</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Adrien Pessu
Gautier de Saint Martin Lacaze</p>
</div>
<div class="sect2">
<h3 id="un-peu-de-théorie-6">Un peu de théorie</h3>
<div class="sect3">
<h4 id="la-mort-de-l-opérateur-ternaire">La mort de l&#8217;opérateur ternaire</h4>
<div class="paragraph">
<p>Bon ok, c&#8217;est peut être un peu pour le buzz.</p>
</div>
<div class="paragraph">
<p>Pour le moment, on n&#8217;a pas encore parlé des conditions. Les fameux <code>if</code>.
Tout comme en Java il est possible d&#8217;utiliser le if en tant que gestionnaire du flux d&#8217;éxécution (désolé, nous n&#8217;avons pas trouvé mieux comme traduction française de flow control).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">val a = 10
val b = 11

if (a &lt; b) {
    print (&quot;Youhou a est inférieur à b&quot;)
}

// Version avec un else
if (a &lt; b) {
    print (&quot;Youhou a est inférieur à b&quot;)
} else {
    print (&quot;Youhou b est inférieur à a&quot;)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il existe une autre façon d&#8217;utiliser le <code>if</code> et c&#8217;est pourquoi on peut parle plus ou mois de la fin de l&#8217;opérateur ternaire (le fameux <code>= ? :</code>).
En Kotlin, <code>if</code> est une expression.
Il est donc possible de s&#8217;en servir pour remplacer l&#8217;opérateur ternaire.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">val max = if (a &gt; b) a else b</code></pre>
</div>
</div>
<div class="paragraph">
<p>On peut même imaginer plus complexe avec l&#8217;exemple suivant.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">val max = if (a &gt; b) {
    print(&quot;Youhou a est le plus grand&quot;)
    a
} else {
    print(&quot;Youhou b est le plus grand&quot;)
    b
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Vous trouverez plus d&#8217;informations sur les <code>String template</code> sur <a href="https://kotlinlang.org/docs/reference/control-flow.html#if-expression">cette page</a></p>
</div>
</div>
<div class="sect3">
<h4 id="gestion-du-null">Gestion du null</h4>
<div class="paragraph">
<p>Le système de type de Kotlin vise à éliminer le danger des références nulles à partir du code.
Ce problème est également connu sous le nom de <a href="https://en.wikipedia.org/wiki/Tony_Hoare#Apologies_and_retractions">The Billion Dollar Mistake</a>.
Bien entendu on parle de la fameuse NullPointerException de Java (aka NPE).</p>
</div>
<div class="paragraph">
<p>Pour régler ce problème, Kotlin ne permet pas par défaut d&#8217;avoir des références nulles.
Le code suivant est donc <strong>invalide</strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">var kotlin: String = &quot;Kotlin for the win !&quot;
kotlin = null // Le code ne compile pas</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il est possible de déclarer une variable nulle.
Dans ce cas nous utiliserons une précision syntaxique pour indiquer que l&#8217;on autorise le null.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">var java: String? = &quot;Java for the NPE&quot;
java = null // Dans ce cas le code compile</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Notez bien l&#8217;utilisation du <code>?</code> dans la déclaration de la variable <code>java</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A part la déclaration explicite d&#8217;une variable nulle, il existe d&#8217;autres cas pouvant générer une NPE :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>un appel à <code>throw NullPointerException()</code></p>
</li>
<li>
<p>l&#8217;utilisation de l&#8217;opérateur !! (non présenté dans cette partie cf. le site officiel de Kotlin)</p>
</li>
<li>
<p>un problème de données inconsistantes lors de l&#8217;initialisation</p>
</li>
<li>
<p>l&#8217;intéraction avec du code Java</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Alors qu&#8217;est ce qui change entre nos deux morceaux de code précédent.</p>
</div>
<div class="paragraph">
<p>Pour le premier, c&#8217;est simple l&#8217;appel suivant sera valide.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">val length = kotlin.length</code></pre>
</div>
</div>
<div class="paragraph">
<p>Pour le second, ce n&#8217;est pas le cas.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">val length = java.length // Erreur de compilation</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le compilateur va nous forcer à gérer les cas de la nullité.
Et clairement c&#8217;est un gros progrès par rapport au compilateur Java.
Pour la gestion de la nullité, on peut alors utiliser le <code>if else</code> traditionnel, ou bien le <code>safe call operator</code> <code>?.</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">val length: Int? = java?.length // Ici ça compile</code></pre>
</div>
</div>
<div class="paragraph">
<p>La valeur de <code>length</code> sera soit la taille de <code>java</code> si <code>java</code> est valorisé, ou alors <code>null</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
On peut remarquer que le type de length sera alors <code>Int?</code> et non pas <code>Int</code>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Là où cela devient très intéressant c&#8217;est que l&#8217;on peut chaîner les opérateurs <code>?.</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">val profileLabel = user?.profile?.label</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans le cas précédent, <code>profileLabel</code> sera <code>null</code> si <code>user</code> est <code>null</code> ou si <code>profile</code> est <code>null</code>.</p>
</div>
<div class="paragraph">
<p>Vous trouverez plus d&#8217;informations sur les <code>String template</code> sur <a href="https://kotlinlang.org/docs/reference/null-safety.html#nullable-types-and-non-null-types">cette page</a></p>
</div>
</div>
<div class="sect3">
<h4 id="les-extensions">Les extensions</h4>
<div class="paragraph">
<p>Les extensions <code>Kotlin</code> permettent d&#8217;étendre un type de données sans pour autant modifier la classe de départ.
Cela est très pratique lorsque l&#8217;on souhaite ajouter des comportements sur une classe mais que l&#8217;on n&#8217;a pas la main sur le code source.</p>
</div>
<div class="paragraph">
<p>Prenons le code suivant :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">open class Humain {
    fun voyager(destination: String) {
        print(&quot;Voyager ${destination}&quot;)
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Par défaut, un humain peut voyager.
Mais admettons que l&#8217;humain soit devenu sage et que l&#8217;on veille lui permettre de voyager dans le temps.
On peut le faire via l&#8217;extension suivante :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">fun Humain.voyagerDansLeTemps(destination: String, annee: Int) {
        print(&quot;Voyager ${destination} en ${annee}&quot;)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ensuite on pourra utiliser notre extension de la manière suivante:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">val humain: Humain = Humain()
humain.voyager(&quot;A La Rochelle&quot;)
humain.voyagerDansLeTemps(&quot;A La Rochelle&quot;, 1985)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il existe néanmoins quelques limites aux extension.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Il n&#8217;est pas possible de surcharger une méthode de classe ou interface existante.</p>
</li>
<li>
<p>Il est nécessaire d&#8217;importer l&#8217;extension dès que l&#8217;on souhaite l&#8217;utiliser.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="exercice-5">Exercice 5</h3>
<div class="paragraph">
<p>Afin de commancer l&#8217;exercice suivant, faites un checkout du step5.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>git checkout step5</code></pre>
</div>
</div>
<div class="paragraph">
<p>Modifier la fonction <code>prettier</code> en extension de la classe java.util.Date.</p>
</div>
<div class="paragraph">
<p>N&#8217;oubliez pas d&#8217;exécuter les TU!</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="pour-aller-plus-loin">Pour aller plus loin</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Adrien Pessu
Gautier de Saint Martin Lacaze</p>
</div>
<div class="sect2">
<h3 id="exercice-6">Exercice 6</h3>
<div class="paragraph">
<p>Aller dans Menu &gt; Tools &gt; Kotlin &gt; Show Kotlin Bytecode</p>
</div>
<div class="paragraph">
<p>Ouvrer un de vos fichiers Kotlin et cliquer sur `Decompile' et vous verrez le code convertie de Kotlin vers ByteCode puis vers Java
Cet outil est interessant pour les developpeurs connaisant bien Java.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2018-09-13 11:58:15 CEST
</div>
</div>
</body>
</html>